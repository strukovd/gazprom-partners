import{d as w,r as R,x as c,z as a,K as g,L as h,y as i,T as k,U as A,A as C}from"#entry";const B={class:"dyn-table"},E=["onFocusout","onKeydown"],r=5,F=w({__name:"table.index",setup(K){const t=R([p(r)]);function p(e){return Array.from({length:e},()=>"")}function d(e){return(e??"").replace(/\u00A0/g," ").replace(/\u200B/g,"").replace(/<br\s*\/?>/gi,`
`).replace(/\s+/g," ").trim()}function f(e){return e.every(n=>d(n)==="")}function m(){if(t.value.length>1){const e=t.value.length-1;t.value=t.value.filter((n,s)=>s===e||!f(n))}t.value.length===0?t.value.push(p(r)):f(t.value[t.value.length-1])||t.value.push(p(r))}function y(e,n,s){const l=e.target,u=d(l.textContent??l.innerText);t.value[n][s]=u,m()}function _(e,n){const s=t.value.length-1;e===s&&!f(t.value[e])&&t.value.push(p(r));let l=e,u=n+1;u>=r&&(u=0,l=Math.min(e+1,t.value.length-1)),queueMicrotask(()=>{const o=document.querySelectorAll("tbody td")[l*r+u];o&&(o.focus(),b(o))})}function b(e){const n=document.createRange();n.selectNodeContents(e),n.collapse(!1);const s=window.getSelection();s?.removeAllRanges(),s?.addRange(n)}return(e,n)=>(i(),c("section",null,[a("table",B,[n[0]||(n[0]=a("thead",null,[a("tr",null,[a("td",{rowspan:"2"},"ФИО сварщика"),a("td",{colspan:"2"},"Клеймо и номер удостоверения сварщика"),a("td",{rowspan:"2"},"Сварено стыков"),a("td",{rowspan:"2"},"Дата проведения сварочных работ")]),a("tr",null,[a("td",null,"Диаметр, мм"),a("td",null,"Число, шт.")])],-1)),a("tbody",null,[(i(!0),c(g,null,h(t.value,(s,l)=>(i(),c("tr",{key:l},[(i(!0),c(g,null,h(s,(u,o)=>(i(),c("td",{key:`${l}:${o}`,contenteditable:"",spellcheck:"false",onFocusout:v=>y(v,l,o),onKeydown:k(A(v=>_(l,o),["prevent"]),["enter"]),class:"cell"},C(t.value[l][o]),41,E))),128))]))),128))])])]))}});export{F as default};
